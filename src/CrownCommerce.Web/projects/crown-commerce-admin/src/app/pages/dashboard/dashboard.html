<!-- Toolbar -->
<div class="toolbar">
  <h1 class="toolbar-title">Dashboard</h1>
</div>

<!-- Content Area -->
<div class="content-area">
  @if (error()) {
    <div class="error-banner">
      <mat-icon>error</mat-icon>
      {{ error() }}
    </div>
  }

  <!-- Welcome -->
  <div class="welcome-row">
    <div class="welcome-text">
      <h2 class="page-title">Welcome back{{ userName() ? ', ' + userName() : '' }}</h2>
      <p class="page-subtitle">Here's what's happening with your store today.</p>
    </div>
  </div>

  <!-- Metric Cards -->
  <div class="metrics-row">
    @for (metric of metrics(); track metric.label) {
      <mat-card class="metric-card">
        <mat-card-content>
          <span class="metric-label">{{ metric.label }}</span>
          <span class="metric-value">{{ metric.value }}</span>
          <div class="metric-change">
            <mat-icon [style.color]="metric.iconColor" class="metric-icon">{{ metric.icon }}</mat-icon>
          </div>
        </mat-card-content>
      </mat-card>
    }
  </div>

  <!-- Bottom Row: Recent Products + Recent Inquiries -->
  <div class="bottom-row">
    <!-- Recent Products Table -->
    <mat-card class="recent-products-card">
      <div class="card-header">
        <span class="card-title">Recent Products</span>
        <a routerLink="/products" class="view-all-link">View All</a>
      </div>
      <table mat-table [dataSource]="recentProducts()" class="products-table">
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef>Name</th>
          <td mat-cell *matCellDef="let row">{{ row.name }}</td>
        </ng-container>
        <ng-container matColumnDef="type">
          <th mat-header-cell *matHeaderCellDef>Type</th>
          <td mat-cell *matCellDef="let row">{{ row.type }}</td>
        </ng-container>
        <ng-container matColumnDef="price">
          <th mat-header-cell *matHeaderCellDef>Price</th>
          <td mat-cell *matCellDef="let row">{{ row.price | currency }}</td>
        </ng-container>
        <ng-container matColumnDef="origin">
          <th mat-header-cell *matHeaderCellDef>Origin</th>
          <td mat-cell *matCellDef="let row">{{ row.originCountry }}</td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="productColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: productColumns;"></tr>
      </table>
    </mat-card>

    <!-- Recent Inquiries -->
    <mat-card class="recent-inquiries-card">
      <div class="card-header">
        <span class="card-title">Recent Inquiries</span>
        <a routerLink="/inquiries" class="view-all-link">View All</a>
      </div>
      <div class="inquiries-list">
        @for (inq of recentInquiries(); track inq.name; let last = $last) {
          <div class="inquiry-item" [class.inquiry-item--last]="last">
            <div class="inquiry-avatar">
              {{ inq.initials }}
            </div>
            <div class="inquiry-info">
              <span class="inquiry-name">{{ inq.name }}</span>
              <span class="inquiry-message">{{ inq.message }}</span>
            </div>
            <span class="inquiry-time">{{ inq.time | date:'shortDate' }}</span>
          </div>
        }
      </div>
    </mat-card>
  </div>
</div>
