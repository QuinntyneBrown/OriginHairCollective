<section class="contact">
  <lib-section-header label="GET IN TOUCH" heading="We'd Love to Hear From You" />

  @if (submitted()) {
    <div class="contact__success">
      <h3>Thank you!</h3>
      <p>Your message has been sent. We'll get back to you as soon as possible.</p>
    </div>
  } @else {
    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="contact__form">
      <div class="contact__field">
        <label for="name">Name *</label>
        <input id="name" formControlName="name" placeholder="Your name" />
        @if (form.controls.name.touched && form.controls.name.errors) {
          <span class="contact__error">Name is required.</span>
        }
      </div>

      <div class="contact__field">
        <label for="email">Email *</label>
        <input id="email" type="email" formControlName="email" placeholder="your@email.com" />
        @if (form.controls.email.touched && form.controls.email.errors) {
          <span class="contact__error">
            @if (form.controls.email.errors['required']) {
              Email is required.
            } @else {
              Please enter a valid email.
            }
          </span>
        }
      </div>

      <div class="contact__field">
        <label for="phone">Phone</label>
        <input id="phone" formControlName="phone" placeholder="(optional)" />
      </div>

      <div class="contact__field">
        <label for="message">Message *</label>
        <textarea id="message" formControlName="message" placeholder="How can we help you?" rows="5"></textarea>
        @if (form.controls.message.touched && form.controls.message.errors) {
          <span class="contact__error">Message is required.</span>
        }
      </div>

      @if (errorMessage()) {
        <p class="contact__submit-error">{{ errorMessage() }}</p>
      }

      <lib-button variant="primary" type="submit" [disabled]="submitting()">
        {{ submitting() ? 'SENDING...' : 'SEND MESSAGE' }}
      </lib-button>
    </form>
  }
</section>
